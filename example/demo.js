(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _index = require('../package/index.js');

var _index2 = _interopRequireDefault(_index);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

window.test = (0, _index2.default)();

window.test.on('up', function () {
  return console.log('up');
});
window.test.on('down', function () {
  return console.log('down');
});

window.test2 = (0, _index2.default)();

window.test2.on('up', function () {
  return console.log('up');
});
window.test2.on('down', function () {
  return console.log('down');
});

},{"../package/index.js":2}],2:[function(require,module,exports){
'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _srraf=require('srraf'),_srraf2=_interopRequireDefault(_srraf),_svel=require('svel'),_svel2=_interopRequireDefault(_svel),_loop=require('loop.js'),_loop2=_interopRequireDefault(_loop);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var merge=function(a){for(var c=arguments.length,b=Array(1<c?c-1:0),d=1;d<c;d++)b[d-1]=arguments[d];return b.reduce(function(e,f){return Object.keys(f).forEach(function(g){e[g]=f[g]}),e},a)};exports.default=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=null,c=(0,_loop2.default)();return Object.create(merge(function d(e){var f=e.speed,g=f===void 0?50:f;return _srraf2.default?_srraf2.default.scroll.use(function(h,i){var j=h.curr,l=h.prev,m=(0,_svel2.default)(j,i)>g||50;j>=l&&'down'!==b&&m?(b='down',c.emit(b)):j<=l&&'up'!==b&&m?(b='up',c.emit(b)):'static'!==b&&!m&&(b='static',c.emit('static'))}).update():{}}(a),c),{position:{get:function get(){return b}}})};

},{"loop.js":3,"srraf":4,"svel":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.default = function () {
  var o = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var listeners = {};

  var on = function on(e) {
    var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    if (!cb) return;
    listeners[e] = listeners[e] || { queue: [] };
    listeners[e].queue.push(cb);
  };

  var emit = function emit(e) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    var items = listeners[e] ? listeners[e].queue : false;
    items && items.forEach(function (i) {
      return i(data);
    });
  };

  return _extends({}, o, {
    emit: emit,
    on: on
  });
};
},{}],4:[function(require,module,exports){
'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var scrollInstance=null,resizeInstance=null,Listener=function(){function a(b){_classCallCheck(this,a),this.type=b,this.pool=0,this.queue=[],this.curr=this.position(),this.prev=this.position(),this.ticking=!1,window.addEventListener(b,this.requestFrame.bind(this))}return _createClass(a,[{key:'position',value:function position(){return'scroll'===this.type?window.scrollY||window.pageYOffset:window.innerWidth}},{key:'requestFrame',value:function requestFrame(b){this.e=b,this.curr=this.position(),this.ticking||(window.requestAnimationFrame(this.run.bind(this)),this.ticking=!0)}},{key:'run',value:function run(){var b=this;this.queue.forEach(function(c){return c[1]({curr:b.curr,prev:b.prev},b.e)}),this.prev=this.curr,this.ticking=!1}},{key:'use',value:function use(b){var c=this,d=c.pool++;return c.queue.push([d,b]),{destroy:function destroy(){return c.queue.forEach(function(f,g){f[0]===d&&c.queue.splice(g,1)}),this},update:function update(){return b({curr:c.curr,prev:c.prev},c.e),this}}}},{key:'update',value:function update(){this.run()}}]),a}();exports.default='undefined'==typeof window?null:{get scroll(){return scrollInstance||(scrollInstance=new Listener('scroll')),scrollInstance},get resize(){return resizeInstance||(resizeInstance=new Listener('resize')),resizeInstance},use:function use(a){var _scroll=this.scroll,b=_scroll.curr,c=_scroll.prev,_resize=this.resize,d=_resize.curr,f=_resize.prev,g={currY:b,prevY:c,currX:d,prevX:f},h=this.scroll.use(function(_ref,m){var k=_ref.curr,l=_ref.prev;g.currY=k,g.prevY=l,a(g,m)}),j=this.resize.use(function(_ref2,m){var k=_ref2.curr,l=_ref2.prev;g.currX=k,g.prevX=l,a(g,m)});return{destroy:function destroy(){return h.destroy(),j.destroy(),this},update:function update(){return h.update(),j.update(),this}}}};
},{}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var time=0,prevtime=0,distance=0,prevscroll=null,pool=[],timeout=null;exports.default=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{timeStamp:0},c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},d=0;if(!b.timeStamp||0===b.timeStamp)return 0;time=b.timeStamp-prevtime,distance=Math.abs(a-prevscroll||0),prevscroll=a,prevtime=b.timeStamp,pool.push(distance/(time*(1/(c.interval||100)))),pool.length>(c.pool||10)&&pool.shift();for(var e=0;e<pool.length;e++)return d=pool[e]+d,d/(e+1);timeout=setTimeout(function(){time=0,prevtime=0,distance=0,prevscroll=0,pool=[]},c.reset||50),timeout&&clearTimeout(timeout)};
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIi4uL3BhY2thZ2UvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9sb29wLmpzL2Rpc3QvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9zcnJhZi9kaXN0L2luZGV4LmpzIiwiLi4vcGFja2FnZS9ub2RlX21vZHVsZXMvc3ZlbC9kaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7Ozs7O0FBRUEsT0FBTyxJQUFQLEdBQWMsc0JBQWQ7O0FBRUEsT0FBTyxJQUFQLENBQVksRUFBWixDQUFlLElBQWYsRUFBcUI7QUFBQSxTQUFNLFFBQVEsR0FBUixDQUFZLElBQVosQ0FBTjtBQUFBLENBQXJCO0FBQ0EsT0FBTyxJQUFQLENBQVksRUFBWixDQUFlLE1BQWYsRUFBdUI7QUFBQSxTQUFNLFFBQVEsR0FBUixDQUFZLE1BQVosQ0FBTjtBQUFBLENBQXZCOztBQUVBLE9BQU8sS0FBUCxHQUFlLHNCQUFmOztBQUVBLE9BQU8sS0FBUCxDQUFhLEVBQWIsQ0FBZ0IsSUFBaEIsRUFBc0I7QUFBQSxTQUFNLFFBQVEsR0FBUixDQUFZLElBQVosQ0FBTjtBQUFBLENBQXRCO0FBQ0EsT0FBTyxLQUFQLENBQWEsRUFBYixDQUFnQixNQUFoQixFQUF3QjtBQUFBLFNBQU0sUUFBUSxHQUFSLENBQVksTUFBWixDQUFOO0FBQUEsQ0FBeEI7OztvRUNWQSw0TCx3RUFJQSxHQUFNLE9BQVEsU0FBQyxDQUFELDZCQUFZLENBQVosOEJBQVksQ0FBWix5QkFBcUIsR0FBSyxNQUFMLENBQVksU0FBQyxDQUFELENBQVMsQ0FBVCxDQUFpQixDQUU5RCxNQURBLFFBQU8sSUFBUCxDQUFZLENBQVosRUFBaUIsT0FBakIsQ0FBeUIsV0FBSyxDQUFFLEVBQU8sQ0FBUCxFQUFZLEVBQUksQ0FBSixDQUFRLENBQXBELENBQ0EsQ0FBTyxDQUNSLENBSGtDLENBR2hDLENBSGdDLENBQXJCLENBQWQsQyxnQkFLZSxVQUFlLElBQWQsRUFBYywyREFDeEIsRUFBVyxJQURhLENBRXRCLEVBQVUsb0JBRlksQ0FtQjVCLE1BQU8sUUFBTyxNQUFQLENBQWMsTUFmSixRQUFYLEVBQVcsWUFBRyxLQUFILENBQUcsQ0FBSCxZQUFXLEVBQVgsU0FBb0IsaUJBQVEsZ0JBQU0sTUFBTixDQUFhLEdBQWIsQ0FBaUIsV0FBaUIsQ0FBakIsQ0FBMkIsSUFBeEIsRUFBd0IsR0FBeEIsSUFBd0IsQ0FBbEIsQ0FBa0IsR0FBbEIsSUFBa0IsQ0FDakYsRUFBTyxtQkFBSyxDQUFMLENBQVcsQ0FBWCxFQUFvQixDQUFwQixFQUE2QixFQUQ2QyxDQUduRixHQUFRLENBQVIsRUFBNkIsTUFBYixJQUFoQixFQUF1QyxDQUg0QyxFQUlyRixFQUFXLE1BSjBFLENBS3JGLEVBQVEsSUFBUixDQUFhLENBQWIsQ0FMcUYsRUFNNUUsR0FBUSxDQUFSLEVBQTZCLElBQWIsSUFBaEIsRUFBcUMsQ0FOdUMsRUFPckYsRUFBVyxJQVAwRSxDQVFyRixFQUFRLElBQVIsQ0FBYSxDQUFiLENBUnFGLEVBUy9ELFFBQWIsTUFBeUIsQ0FBQyxDQVRrRCxHQVVyRixFQUFXLFFBVjBFLENBV3JGLEVBQVEsSUFBUixDQUFhLFFBQWIsQ0FYcUYsQ0FheEYsQ0FiNEMsRUFhMUMsTUFiMEMsRUFBUixHQUFwQixDQWVVLENBQVMsQ0FBVCxDQUFOLENBQXNCLENBQXRCLENBQWQsQ0FBOEMsQ0FDbkQsU0FBVSxDQUNSLEdBRFEsZUFDRixDQUNKLE1BQU8sRUFDUixDQUhPLENBRHlDLENBQTlDLENBT1IsQzs7O0FDbkNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBOztBQ0FBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB1cGR3biBmcm9tICcuLi9wYWNrYWdlL2luZGV4LmpzJ1xuXG53aW5kb3cudGVzdCA9IHVwZHduKClcblxud2luZG93LnRlc3Qub24oJ3VwJywgKCkgPT4gY29uc29sZS5sb2coJ3VwJykpXG53aW5kb3cudGVzdC5vbignZG93bicsICgpID0+IGNvbnNvbGUubG9nKCdkb3duJykpXG5cbndpbmRvdy50ZXN0MiA9IHVwZHduKClcblxud2luZG93LnRlc3QyLm9uKCd1cCcsICgpID0+IGNvbnNvbGUubG9nKCd1cCcpKVxud2luZG93LnRlc3QyLm9uKCdkb3duJywgKCkgPT4gY29uc29sZS5sb2coJ2Rvd24nKSlcbiIsImltcG9ydCBzcnJhZiBmcm9tICdzcnJhZidcbmltcG9ydCBzdmVsIGZyb20gJ3N2ZWwnXG5pbXBvcnQgbG9vcCBmcm9tICdsb29wLmpzJ1xuXG5jb25zdCBtZXJnZSA9ICh0YXJnZXQsIC4uLmFyZ3MpID0+IGFyZ3MucmVkdWNlKCh0YXJnZXQsIGFyZykgPT4ge1xuICBPYmplY3Qua2V5cyhhcmcpLmZvckVhY2goayA9PiB7IHRhcmdldFtrXSA9IGFyZ1trXSB9KVxuICByZXR1cm4gdGFyZ2V0XG59LCB0YXJnZXQpXG5cbmV4cG9ydCBkZWZhdWx0IChvcHRzID0ge30pID0+IHtcbiAgbGV0IHBvc2l0aW9uID0gbnVsbFxuICBjb25zdCBlbWl0dGVyID0gbG9vcCgpXG5cbiAgY29uc3Qgc2Nyb2xsZXIgPSAoeyBzcGVlZCA9IDUwIH0pID0+IHNycmFmID8gc3JyYWYuc2Nyb2xsLnVzZSgoeyBjdXJyLCBwcmV2IH0sIGV2ZW50KSA9PiB7XG4gICAgY29uc3QgZmFzdCA9IHN2ZWwoY3VyciwgZXZlbnQpID4gc3BlZWQgfHwgNTBcblxuICAgIGlmIChjdXJyID49IHByZXYgJiYgcG9zaXRpb24gIT09ICdkb3duJyAmJiBmYXN0KSB7XG4gICAgICBwb3NpdGlvbiA9ICdkb3duJ1xuICAgICAgZW1pdHRlci5lbWl0KHBvc2l0aW9uKVxuICAgIH0gZWxzZSBpZiAoY3VyciA8PSBwcmV2ICYmIHBvc2l0aW9uICE9PSAndXAnICYmIGZhc3QpIHtcbiAgICAgIHBvc2l0aW9uID0gJ3VwJ1xuICAgICAgZW1pdHRlci5lbWl0KHBvc2l0aW9uKVxuICAgIH0gZWxzZSBpZiAocG9zaXRpb24gIT09ICdzdGF0aWMnICYmICFmYXN0KSB7XG4gICAgICBwb3NpdGlvbiA9ICdzdGF0aWMnXG4gICAgICBlbWl0dGVyLmVtaXQoJ3N0YXRpYycpXG4gICAgfVxuICB9KS51cGRhdGUoKSA6IHt9XG5cbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUobWVyZ2Uoc2Nyb2xsZXIob3B0cyksIGVtaXR0ZXIpLCB7XG4gICAgcG9zaXRpb246IHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgdmFyIGxpc3RlbmVycyA9IHt9O1xuXG4gIHZhciBvbiA9IGZ1bmN0aW9uIG9uKGUpIHtcbiAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG5cbiAgICBpZiAoIWNiKSByZXR1cm47XG4gICAgbGlzdGVuZXJzW2VdID0gbGlzdGVuZXJzW2VdIHx8IHsgcXVldWU6IFtdIH07XG4gICAgbGlzdGVuZXJzW2VdLnF1ZXVlLnB1c2goY2IpO1xuICB9O1xuXG4gIHZhciBlbWl0ID0gZnVuY3Rpb24gZW1pdChlKSB7XG4gICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG5cbiAgICB2YXIgaXRlbXMgPSBsaXN0ZW5lcnNbZV0gPyBsaXN0ZW5lcnNbZV0ucXVldWUgOiBmYWxzZTtcbiAgICBpdGVtcyAmJiBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gaShkYXRhKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gX2V4dGVuZHMoe30sIG8sIHtcbiAgICBlbWl0OiBlbWl0LFxuICAgIG9uOiBvblxuICB9KTtcbn07IiwiJ3VzZSBzdHJpY3QnO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyl7Zm9yKHZhciBmLGQ9MDtkPGMubGVuZ3RoO2QrKylmPWNbZF0sZi5lbnVtZXJhYmxlPWYuZW51bWVyYWJsZXx8ITEsZi5jb25maWd1cmFibGU9ITAsJ3ZhbHVlJ2luIGYmJihmLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYixmLmtleSxmKX1yZXR1cm4gZnVuY3Rpb24oYixjLGQpe3JldHVybiBjJiZhKGIucHJvdG90eXBlLGMpLGQmJmEoYixkKSxifX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnX19lc01vZHVsZScse3ZhbHVlOiEwfSk7ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyl9dmFyIHNjcm9sbEluc3RhbmNlPW51bGwscmVzaXplSW5zdGFuY2U9bnVsbCxMaXN0ZW5lcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7X2NsYXNzQ2FsbENoZWNrKHRoaXMsYSksdGhpcy50eXBlPWIsdGhpcy5wb29sPTAsdGhpcy5xdWV1ZT1bXSx0aGlzLmN1cnI9dGhpcy5wb3NpdGlvbigpLHRoaXMucHJldj10aGlzLnBvc2l0aW9uKCksdGhpcy50aWNraW5nPSExLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5yZXF1ZXN0RnJhbWUuYmluZCh0aGlzKSl9cmV0dXJuIF9jcmVhdGVDbGFzcyhhLFt7a2V5Oidwb3NpdGlvbicsdmFsdWU6ZnVuY3Rpb24gcG9zaXRpb24oKXtyZXR1cm4nc2Nyb2xsJz09PXRoaXMudHlwZT93aW5kb3cuc2Nyb2xsWXx8d2luZG93LnBhZ2VZT2Zmc2V0OndpbmRvdy5pbm5lcldpZHRofX0se2tleToncmVxdWVzdEZyYW1lJyx2YWx1ZTpmdW5jdGlvbiByZXF1ZXN0RnJhbWUoYil7dGhpcy5lPWIsdGhpcy5jdXJyPXRoaXMucG9zaXRpb24oKSx0aGlzLnRpY2tpbmd8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucnVuLmJpbmQodGhpcykpLHRoaXMudGlja2luZz0hMCl9fSx7a2V5OidydW4nLHZhbHVlOmZ1bmN0aW9uIHJ1bigpe3ZhciBiPXRoaXM7dGhpcy5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3JldHVybiBjWzFdKHtjdXJyOmIuY3VycixwcmV2OmIucHJldn0sYi5lKX0pLHRoaXMucHJldj10aGlzLmN1cnIsdGhpcy50aWNraW5nPSExfX0se2tleTondXNlJyx2YWx1ZTpmdW5jdGlvbiB1c2UoYil7dmFyIGM9dGhpcyxkPWMucG9vbCsrO3JldHVybiBjLnF1ZXVlLnB1c2goW2QsYl0pLHtkZXN0cm95OmZ1bmN0aW9uIGRlc3Ryb3koKXtyZXR1cm4gYy5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsZyl7ZlswXT09PWQmJmMucXVldWUuc3BsaWNlKGcsMSl9KSx0aGlzfSx1cGRhdGU6ZnVuY3Rpb24gdXBkYXRlKCl7cmV0dXJuIGIoe2N1cnI6Yy5jdXJyLHByZXY6Yy5wcmV2fSxjLmUpLHRoaXN9fX19LHtrZXk6J3VwZGF0ZScsdmFsdWU6ZnVuY3Rpb24gdXBkYXRlKCl7dGhpcy5ydW4oKX19XSksYX0oKTtleHBvcnRzLmRlZmF1bHQ9J3VuZGVmaW5lZCc9PXR5cGVvZiB3aW5kb3c/bnVsbDp7Z2V0IHNjcm9sbCgpe3JldHVybiBzY3JvbGxJbnN0YW5jZXx8KHNjcm9sbEluc3RhbmNlPW5ldyBMaXN0ZW5lcignc2Nyb2xsJykpLHNjcm9sbEluc3RhbmNlfSxnZXQgcmVzaXplKCl7cmV0dXJuIHJlc2l6ZUluc3RhbmNlfHwocmVzaXplSW5zdGFuY2U9bmV3IExpc3RlbmVyKCdyZXNpemUnKSkscmVzaXplSW5zdGFuY2V9LHVzZTpmdW5jdGlvbiB1c2UoYSl7dmFyIF9zY3JvbGw9dGhpcy5zY3JvbGwsYj1fc2Nyb2xsLmN1cnIsYz1fc2Nyb2xsLnByZXYsX3Jlc2l6ZT10aGlzLnJlc2l6ZSxkPV9yZXNpemUuY3VycixmPV9yZXNpemUucHJldixnPXtjdXJyWTpiLHByZXZZOmMsY3Vyclg6ZCxwcmV2WDpmfSxoPXRoaXMuc2Nyb2xsLnVzZShmdW5jdGlvbihfcmVmLG0pe3ZhciBrPV9yZWYuY3VycixsPV9yZWYucHJldjtnLmN1cnJZPWssZy5wcmV2WT1sLGEoZyxtKX0pLGo9dGhpcy5yZXNpemUudXNlKGZ1bmN0aW9uKF9yZWYyLG0pe3ZhciBrPV9yZWYyLmN1cnIsbD1fcmVmMi5wcmV2O2cuY3Vyclg9ayxnLnByZXZYPWwsYShnLG0pfSk7cmV0dXJue2Rlc3Ryb3k6ZnVuY3Rpb24gZGVzdHJveSgpe3JldHVybiBoLmRlc3Ryb3koKSxqLmRlc3Ryb3koKSx0aGlzfSx1cGRhdGU6ZnVuY3Rpb24gdXBkYXRlKCl7cmV0dXJuIGgudXBkYXRlKCksai51cGRhdGUoKSx0aGlzfX19fTsiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgdGltZT0wLHByZXZ0aW1lPTAsZGlzdGFuY2U9MCxwcmV2c2Nyb2xsPW51bGwscG9vbD1bXSx0aW1lb3V0PW51bGw7ZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKGEpe3ZhciBiPTE8YXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7dGltZVN0YW1wOjB9LGM9Mjxhcmd1bWVudHMubGVuZ3RoJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOnt9LGQ9MDtpZighYi50aW1lU3RhbXB8fDA9PT1iLnRpbWVTdGFtcClyZXR1cm4gMDt0aW1lPWIudGltZVN0YW1wLXByZXZ0aW1lLGRpc3RhbmNlPU1hdGguYWJzKGEtcHJldnNjcm9sbHx8MCkscHJldnNjcm9sbD1hLHByZXZ0aW1lPWIudGltZVN0YW1wLHBvb2wucHVzaChkaXN0YW5jZS8odGltZSooMS8oYy5pbnRlcnZhbHx8MTAwKSkpKSxwb29sLmxlbmd0aD4oYy5wb29sfHwxMCkmJnBvb2wuc2hpZnQoKTtmb3IodmFyIGU9MDtlPHBvb2wubGVuZ3RoO2UrKylyZXR1cm4gZD1wb29sW2VdK2QsZC8oZSsxKTt0aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aW1lPTAscHJldnRpbWU9MCxkaXN0YW5jZT0wLHByZXZzY3JvbGw9MCxwb29sPVtdfSxjLnJlc2V0fHw1MCksdGltZW91dCYmY2xlYXJUaW1lb3V0KHRpbWVvdXQpfTsiXX0=
