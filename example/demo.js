(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _index = require('../package/index.js');

var _index2 = _interopRequireDefault(_index);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

document.addEventListener('DOMContentLoaded', function (e) {
  var view = document.getElementById('view');

  var ud = (0, _index2.default)({
    speed: 200
  });

  ud.on('up', function () {
    return view.innerHTML = 'up';
  });
  ud.on('down', function () {
    return view.innerHTML = 'down';
  });

  console.log('\nimport updwn from \'../package/index.js\'\n\ndocument.addEventListener(\'DOMContentLoaded\', e => {\n  const view = document.getElementById(\'view\')\n\n  const ud = updwn({\n    speed: 200\n  })\n\n  ud.on(\'up\', () => view.innerHTML = \'up\')\n  ud.on(\'down\', () => view.innerHTML = \'down\')\n})\n  ');
});

},{"../package/index.js":2}],2:[function(require,module,exports){
'use strict';var _extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var d in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a},_srraf=require('srraf'),_srraf2=_interopRequireDefault(_srraf),_loop=require('loop.js'),_loop2=_interopRequireDefault(_loop);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _objectWithoutProperties(a,b){var d={};for(var c in a)0<=b.indexOf(c)||Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d}exports.default=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=null,c=0,d=0,e=(0,_loop2.default)();return _extends({},function f(g){var h=g.speed,j=h===void 0?50:h,k=_objectWithoutProperties(g,['speed']);return _srraf2.default?_srraf2.default.scroll.use(function(l){var m=l.curr,n=l.prev,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{timeStamp:0};c=o.timeStamp-d,d=o.timeStamp;var p=Math.abs(m-n),q=(p/c||0)*(a.interval||100),r=q>j,s=function(t){b=t,e.emit(t)};m>=n&&'down'!==b&&r?s('down'):m<=n&&'up'!==b&&r&&s('up')}).update():{}}(a),e,{get position(){return b}})};

},{"loop.js":3,"srraf":4}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.default = function () {
  var o = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var listeners = {};

  var on = function on(e) {
    var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    if (!cb) return;
    listeners[e] = listeners[e] || { queue: [] };
    listeners[e].queue.push(cb);
  };

  var emit = function emit(e) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    var items = listeners[e] ? listeners[e].queue : false;
    items && items.forEach(function (i) {
      return i(data);
    });
  };

  return _extends({}, o, {
    emit: emit,
    on: on
  });
};
},{}],4:[function(require,module,exports){
'use strict';var _createClass=function(){function e(i,n){for(var o,p=0;p<n.length;p++)o=n[p],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}return function(i,n,o){return n&&e(i.prototype,n),o&&e(i,o),i}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError('Cannot call a class as a function')}var scrollInstance=null,resizeInstance=null,Listener=function(){function e(i){_classCallCheck(this,e),this.type=i,this.pool=0,this.queue=[],this.curr=this.position(),this.prev=this.position(),this.ticking=!1,window.addEventListener(i,this.requestFrame.bind(this))}return _createClass(e,[{key:'position',value:function(){return'scroll'===this.type?window.scrollY||window.pageYOffset:window.innerWidth}},{key:'requestFrame',value:function(n){this.e=n,this.curr=this.position(),this.ticking||(window.requestAnimationFrame(this.run.bind(this)),this.ticking=!0)}},{key:'run',value:function(){var n=this;this.queue.forEach(function(o){return o[1]({curr:n.curr,prev:n.prev},n.e)}),this.prev=this.curr,this.ticking=!1}},{key:'use',value:function(n){var o=this,p=o.pool++;return o.queue.push([p,n]),{destroy:function(){return o.queue.forEach(function(r,s){r[0]===p&&o.queue.splice(s,1)}),this},update:function(){return n({curr:o.curr,prev:o.prev},o.e),this}}}},{key:'update',value:function(){this.run()}}]),e}();exports.default='undefined'==typeof window?null:{get scroll(){return scrollInstance||(scrollInstance=new Listener('scroll')),scrollInstance},get resize(){return resizeInstance||(resizeInstance=new Listener('resize')),resizeInstance},use:function(i){var n=this.scroll,o=n.curr,p=n.prev,q=this.resize,r=q.curr,s=q.prev,t={currY:o,prevY:p,currX:r,prevX:s},u=this.scroll.use(function(w,x){var y=w.curr,z=w.prev;t.currY=y,t.prevY=z,i(t,x)}),v=this.resize.use(function(w,x){var y=w.curr,z=w.prev;t.currX=y,t.prevX=z,i(t,x)});return{destroy:function(){return u.destroy(),v.destroy(),this},update:function(){return u.update(),v.update(),this}}}};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIi4uL3BhY2thZ2UvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9sb29wLmpzL2Rpc3QvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9zcnJhZi9kaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7Ozs7O0FBRUEsU0FBUyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsYUFBSztBQUNqRCxNQUFNLE9BQU8sU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQWI7O0FBRUEsTUFBTSxLQUFLLHFCQUFNO0FBQ2YsV0FBTztBQURRLEdBQU4sQ0FBWDs7QUFJQSxLQUFHLEVBQUgsQ0FBTSxJQUFOLEVBQVk7QUFBQSxXQUFNLEtBQUssU0FBTCxHQUFpQixJQUF2QjtBQUFBLEdBQVo7QUFDQSxLQUFHLEVBQUgsQ0FBTSxNQUFOLEVBQWM7QUFBQSxXQUFNLEtBQUssU0FBTCxHQUFpQixNQUF2QjtBQUFBLEdBQWQ7O0FBRUEsVUFBUSxHQUFSO0FBY0QsQ0F4QkQ7OztxbEJDQ2UsVUFBaUIsSUFBaEIsRUFBZ0IsMkRBQzFCLEVBQVcsSUFEZSxDQUUxQixFQUFPLENBRm1CLENBRzFCLEVBQVcsQ0FIZSxDQUt4QixFQUFVLG9CQUxjLENBMkI5QixtQkFwQmlCLFFBQVgsRUFBVyxZQUFHLEtBQUgsQ0FBRyxDQUFILFlBQVcsRUFBWCxHQUFrQixDQUFsQiw2Q0FBNkIsaUJBQVEsZ0JBQU0sTUFBTixDQUFhLEdBQWIsQ0FBaUIsV0FBOEMsSUFBM0MsRUFBMkMsR0FBM0MsSUFBMkMsQ0FBckMsQ0FBcUMsR0FBckMsSUFBcUMsQ0FBN0IsQ0FBNkIsd0RBQXJCLENBQUUsVUFBVyxDQUFiLENBQXFCLENBQ25ILEVBQU8sRUFBTSxTQUFOLENBQWtCLENBRDBGLENBRW5ILEVBQVcsRUFBTSxTQUZrRyxDQUluSCxHQUFNLEdBQVcs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QVksR0FBWixDQUFnQixTQUFTLENBQVQsQ0FBZSxDQUFmLENBQWlCLENBQUMsR0FBSSxHQUFFLEVBQU0sSUFBWixDQUFpQixFQUFFLEVBQU0sSUFBekIsQ0FBOEIsRUFBRSxLQUFGLENBQVEsQ0FBUixDQUFVLEVBQUUsS0FBRixDQUFRLENBQWxCLENBQW9CLEVBQUUsQ0FBRixDQUFJLENBQUosQ0FBTyxDQUEzRixDQUExTyxDQUF1VSxNQUFNLENBQUMsUUFBUSxVQUFrQixDQUFDLE1BQU8sR0FBRSxPQUFGLEdBQVksRUFBRSxPQUFGLEVBQVosQ0FBd0IsSUFBSyxDQUFoRSxDQUFpRSxPQUFPLFVBQWlCLENBQUMsTUFBTyxHQUFFLE1BQUYsR0FBVyxFQUFFLE1BQUYsRUFBWCxDQUFzQixJQUFLLENBQTVILENBQThILENBQXhwQixDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB1cGR3biBmcm9tICcuLi9wYWNrYWdlL2luZGV4LmpzJ1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZSA9PiB7XG4gIGNvbnN0IHZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldycpXG5cbiAgY29uc3QgdWQgPSB1cGR3bih7XG4gICAgc3BlZWQ6IDIwMFxuICB9KVxuXG4gIHVkLm9uKCd1cCcsICgpID0+IHZpZXcuaW5uZXJIVE1MID0gJ3VwJylcbiAgdWQub24oJ2Rvd24nLCAoKSA9PiB2aWV3LmlubmVySFRNTCA9ICdkb3duJylcblxuICBjb25zb2xlLmxvZyhgXG5pbXBvcnQgdXBkd24gZnJvbSAnLi4vcGFja2FnZS9pbmRleC5qcydcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGUgPT4ge1xuICBjb25zdCB2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXcnKVxuXG4gIGNvbnN0IHVkID0gdXBkd24oe1xuICAgIHNwZWVkOiAyMDBcbiAgfSlcblxuICB1ZC5vbigndXAnLCAoKSA9PiB2aWV3LmlubmVySFRNTCA9ICd1cCcpXG4gIHVkLm9uKCdkb3duJywgKCkgPT4gdmlldy5pbm5lckhUTUwgPSAnZG93bicpXG59KVxuICBgKVxufSlcbiIsImltcG9ydCBzcnJhZiBmcm9tICdzcnJhZidcbmltcG9ydCBsb29wIGZyb20gJ2xvb3AuanMnXG5cbmV4cG9ydCBkZWZhdWx0IChjb25maWcgPSB7fSkgPT4ge1xuICBsZXQgcG9zaXRpb24gPSBudWxsXG4gIGxldCB0aW1lID0gMFxuICBsZXQgcHJldnRpbWUgPSAwXG5cbiAgY29uc3QgZW1pdHRlciA9IGxvb3AoKVxuXG4gIGNvbnN0IHNjcm9sbGVyID0gKHsgc3BlZWQgPSA1MCwgLi4ub3B0cyB9KSA9PiBzcnJhZiA/IHNycmFmLnNjcm9sbC51c2UoKHsgY3VyciwgcHJldiB9LCBldmVudCA9IHsgdGltZVN0YW1wOiAwIH0pID0+IHtcbiAgICB0aW1lID0gZXZlbnQudGltZVN0YW1wIC0gcHJldnRpbWVcbiAgICBwcmV2dGltZSA9IGV2ZW50LnRpbWVTdGFtcFxuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLmFicyhjdXJyIC0gcHJldilcbiAgICBjb25zdCB2ZWxvY2l0eSA9ICgoZGlzdGFuY2UgLyB0aW1lKSB8fCAwKSAqIChjb25maWcuaW50ZXJ2YWwgfHwgMTAwKVxuICAgIGNvbnN0IHRocmVzaG9sZCA9IHZlbG9jaXR5ID4gc3BlZWRcblxuICAgIGNvbnN0IGhhbmRsZXIgPSBwb3MgPT4ge1xuICAgICAgcG9zaXRpb24gPSBwb3NcbiAgICAgIGVtaXR0ZXIuZW1pdChwb3MpXG4gICAgfVxuXG4gICAgaWYgKGN1cnIgPj0gcHJldiAmJiBwb3NpdGlvbiAhPT0gJ2Rvd24nICYmIHRocmVzaG9sZCkge1xuICAgICAgaGFuZGxlcignZG93bicpXG4gICAgfSBlbHNlIGlmIChjdXJyIDw9IHByZXYgJiYgcG9zaXRpb24gIT09ICd1cCcgJiYgdGhyZXNob2xkKSB7XG4gICAgICBoYW5kbGVyKCd1cCcpXG4gICAgfVxuICB9KS51cGRhdGUoKSA6IHt9XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5zY3JvbGxlcihjb25maWcpLFxuICAgIC4uLmVtaXR0ZXIsXG4gICAgZ2V0IHBvc2l0aW9uKCkge1xuICAgICAgcmV0dXJuIHBvc2l0aW9uXG4gICAgfSxcbiAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG8gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gIHZhciBsaXN0ZW5lcnMgPSB7fTtcblxuICB2YXIgb24gPSBmdW5jdGlvbiBvbihlKSB7XG4gICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuXG4gICAgaWYgKCFjYikgcmV0dXJuO1xuICAgIGxpc3RlbmVyc1tlXSA9IGxpc3RlbmVyc1tlXSB8fCB7IHF1ZXVlOiBbXSB9O1xuICAgIGxpc3RlbmVyc1tlXS5xdWV1ZS5wdXNoKGNiKTtcbiAgfTtcblxuICB2YXIgZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZSkge1xuICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuXG4gICAgdmFyIGl0ZW1zID0gbGlzdGVuZXJzW2VdID8gbGlzdGVuZXJzW2VdLnF1ZXVlIDogZmFsc2U7XG4gICAgaXRlbXMgJiYgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgcmV0dXJuIGkoZGF0YSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzKHt9LCBvLCB7XG4gICAgZW1pdDogZW1pdCxcbiAgICBvbjogb25cbiAgfSk7XG59OyIsIid1c2Ugc3RyaWN0Jzt2YXIgX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe2Zvcih2YXIgZixkPTA7ZDxjLmxlbmd0aDtkKyspZj1jW2RdLGYuZW51bWVyYWJsZT1mLmVudW1lcmFibGV8fCExLGYuY29uZmlndXJhYmxlPSEwLCd2YWx1ZSdpbiBmJiYoZi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGIsZi5rZXksZil9cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gYyYmYShiLnByb3RvdHlwZSxjKSxkJiZhKGIsZCksYn19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsJ19fZXNNb2R1bGUnLHt2YWx1ZTohMH0pO2Z1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpfXZhciBzY3JvbGxJbnN0YW5jZT1udWxsLHJlc2l6ZUluc3RhbmNlPW51bGwsTGlzdGVuZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe19jbGFzc0NhbGxDaGVjayh0aGlzLGEpLHRoaXMudHlwZT1iLHRoaXMucG9vbD0wLHRoaXMucXVldWU9W10sdGhpcy5jdXJyPXRoaXMucG9zaXRpb24oKSx0aGlzLnByZXY9dGhpcy5wb3NpdGlvbigpLHRoaXMudGlja2luZz0hMSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihiLHRoaXMucmVxdWVzdEZyYW1lLmJpbmQodGhpcykpfXJldHVybiBfY3JlYXRlQ2xhc3MoYSxbe2tleToncG9zaXRpb24nLHZhbHVlOmZ1bmN0aW9uIHBvc2l0aW9uKCl7cmV0dXJuJ3Njcm9sbCc9PT10aGlzLnR5cGU/d2luZG93LnNjcm9sbFl8fHdpbmRvdy5wYWdlWU9mZnNldDp3aW5kb3cuaW5uZXJXaWR0aH19LHtrZXk6J3JlcXVlc3RGcmFtZScsdmFsdWU6ZnVuY3Rpb24gcmVxdWVzdEZyYW1lKGIpe3RoaXMuZT1iLHRoaXMuY3Vycj10aGlzLnBvc2l0aW9uKCksdGhpcy50aWNraW5nfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJ1bi5iaW5kKHRoaXMpKSx0aGlzLnRpY2tpbmc9ITApfX0se2tleToncnVuJyx2YWx1ZTpmdW5jdGlvbiBydW4oKXt2YXIgYj10aGlzO3RoaXMucXVldWUuZm9yRWFjaChmdW5jdGlvbihjKXtyZXR1cm4gY1sxXSh7Y3VycjpiLmN1cnIscHJldjpiLnByZXZ9LGIuZSl9KSx0aGlzLnByZXY9dGhpcy5jdXJyLHRoaXMudGlja2luZz0hMX19LHtrZXk6J3VzZScsdmFsdWU6ZnVuY3Rpb24gdXNlKGIpe3ZhciBjPXRoaXMsZD1jLnBvb2wrKztyZXR1cm4gYy5xdWV1ZS5wdXNoKFtkLGJdKSx7ZGVzdHJveTpmdW5jdGlvbiBkZXN0cm95KCl7cmV0dXJuIGMucXVldWUuZm9yRWFjaChmdW5jdGlvbihmLGcpe2ZbMF09PT1kJiZjLnF1ZXVlLnNwbGljZShnLDEpfSksdGhpc30sdXBkYXRlOmZ1bmN0aW9uIHVwZGF0ZSgpe3JldHVybiBiKHtjdXJyOmMuY3VycixwcmV2OmMucHJldn0sYy5lKSx0aGlzfX19fSx7a2V5Oid1cGRhdGUnLHZhbHVlOmZ1bmN0aW9uIHVwZGF0ZSgpe3RoaXMucnVuKCl9fV0pLGF9KCk7ZXhwb3J0cy5kZWZhdWx0PSd1bmRlZmluZWQnPT10eXBlb2Ygd2luZG93P251bGw6e2dldCBzY3JvbGwoKXtyZXR1cm4gc2Nyb2xsSW5zdGFuY2V8fChzY3JvbGxJbnN0YW5jZT1uZXcgTGlzdGVuZXIoJ3Njcm9sbCcpKSxzY3JvbGxJbnN0YW5jZX0sZ2V0IHJlc2l6ZSgpe3JldHVybiByZXNpemVJbnN0YW5jZXx8KHJlc2l6ZUluc3RhbmNlPW5ldyBMaXN0ZW5lcigncmVzaXplJykpLHJlc2l6ZUluc3RhbmNlfSx1c2U6ZnVuY3Rpb24gdXNlKGEpe3ZhciBfc2Nyb2xsPXRoaXMuc2Nyb2xsLGI9X3Njcm9sbC5jdXJyLGM9X3Njcm9sbC5wcmV2LF9yZXNpemU9dGhpcy5yZXNpemUsZD1fcmVzaXplLmN1cnIsZj1fcmVzaXplLnByZXYsZz17Y3Vyclk6YixwcmV2WTpjLGN1cnJYOmQscHJldlg6Zn0saD10aGlzLnNjcm9sbC51c2UoZnVuY3Rpb24oX3JlZixtKXt2YXIgaz1fcmVmLmN1cnIsbD1fcmVmLnByZXY7Zy5jdXJyWT1rLGcucHJldlk9bCxhKGcsbSl9KSxqPXRoaXMucmVzaXplLnVzZShmdW5jdGlvbihfcmVmMixtKXt2YXIgaz1fcmVmMi5jdXJyLGw9X3JlZjIucHJldjtnLmN1cnJYPWssZy5wcmV2WD1sLGEoZyxtKX0pO3JldHVybntkZXN0cm95OmZ1bmN0aW9uIGRlc3Ryb3koKXtyZXR1cm4gaC5kZXN0cm95KCksai5kZXN0cm95KCksdGhpc30sdXBkYXRlOmZ1bmN0aW9uIHVwZGF0ZSgpe3JldHVybiBoLnVwZGF0ZSgpLGoudXBkYXRlKCksdGhpc319fX07Il19
