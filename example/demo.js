(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _index = require('../package/index.js');

var _index2 = _interopRequireDefault(_index);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

document.addEventListener('DOMContentLoaded', function (e) {
  var view = document.getElementById('view');

  var ud = (0, _index2.default)({
    speed: 100
  }, 'one');
  var ud2 = (0, _index2.default)({
    speed: 400
  }, 'two');

  // window.ud = ud
  window.ud2 = ud2;

  // ud.on('up', () => view.innerHTML = 'up')
  // ud.on('down', () => view.innerHTML = 'down')

  ud.on('up', function () {
    return console.log('ud up');
  });
  ud.on('down', function () {
    return console.log('ud down');
  });

  ud2.on('up', function () {
    return console.log('ud2 up');
  });
  ud2.on('down', function () {
    return console.log('ud2 down');
  });
});

},{"../package/index.js":2}],2:[function(require,module,exports){
'use strict';var _extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var d in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a},_srraf=require('srraf'),_srraf2=_interopRequireDefault(_srraf),_loop=require('loop.js'),_loop2=_interopRequireDefault(_loop);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _objectWithoutProperties(a,b){var d={};for(var c in a)0<=b.indexOf(c)||Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d}exports.default=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=arguments[1],c=null,d=0,e=0,f=(0,_loop2.default)();return _extends({},function g(h){var j=h.speed,k=j===void 0?50:j,l=_objectWithoutProperties(h,['speed']);return _srraf2.default?_srraf2.default.scroll.use(function(m){var n=m.curr,o=m.prev,p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{timeStamp:0};d=p.timeStamp-e,e=p.timeStamp;var q=Math.abs(n-o),r=(q/d||0)*(a.interval||100),s=r>k,t=function(u){c=u,f.emit(u)};n>=o&&'down'!==c&&s?t('down'):n<=o&&'up'!==c&&s&&t('up')}).update():{}}(a),f,{get position(){return c}})};

},{"loop.js":3,"srraf":4}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.default = function () {
  var o = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var listeners = {};

  var on = function on(e) {
    var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    if (!cb) return;
    listeners[e] = listeners[e] || { queue: [] };
    listeners[e].queue.push(cb);
  };

  var emit = function emit(e) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    var items = listeners[e] ? listeners[e].queue : false;
    items && items.forEach(function (i) {
      return i(data);
    });
  };

  return _extends({}, o, {
    emit: emit,
    on: on
  });
};
},{}],4:[function(require,module,exports){
'use strict';var _createClass=function(){function e(i,n){for(var o,p=0;p<n.length;p++)o=n[p],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}return function(i,n,o){return n&&e(i.prototype,n),o&&e(i,o),i}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError('Cannot call a class as a function')}var scrollInstance=null,resizeInstance=null,Listener=function(){function e(i){_classCallCheck(this,e),this.type=i,this.pool=0,this.queue=[],this.curr=this.position(),this.prev=this.position(),this.ticking=!1,window.addEventListener(i,this.requestFrame.bind(this))}return _createClass(e,[{key:'position',value:function(){return'scroll'===this.type?window.scrollY||window.pageYOffset:window.innerWidth}},{key:'requestFrame',value:function(n){this.e=n,this.curr=this.position(),this.ticking||(window.requestAnimationFrame(this.run.bind(this)),this.ticking=!0)}},{key:'run',value:function(){var n=this;this.queue.forEach(function(o){return o[1]({curr:n.curr,prev:n.prev},n.e)}),this.prev=this.curr,this.ticking=!1}},{key:'use',value:function(n){var o=this,p=o.pool++;return o.queue.push([p,n]),{destroy:function(){return o.queue.forEach(function(r,s){r[0]===p&&o.queue.splice(s,1)}),this},update:function(){return n({curr:o.curr,prev:o.prev},o.e),this}}}},{key:'update',value:function(){this.run()}}]),e}();exports.default='undefined'==typeof window?null:{get scroll(){return scrollInstance||(scrollInstance=new Listener('scroll')),scrollInstance},get resize(){return resizeInstance||(resizeInstance=new Listener('resize')),resizeInstance},use:function(i){var n=this.scroll,o=n.curr,p=n.prev,q=this.resize,r=q.curr,s=q.prev,t={currY:o,prevY:p,currX:r,prevX:s},u=this.scroll.use(function(w,x){var y=w.curr,z=w.prev;t.currY=y,t.prevY=z,i(t,x)}),v=this.resize.use(function(w,x){var y=w.curr,z=w.prev;t.currX=y,t.prevX=z,i(t,x)});return{destroy:function(){return u.destroy(),v.destroy(),this},update:function(){return u.update(),v.update(),this}}}};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIi4uL3BhY2thZ2UvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9sb29wLmpzL2Rpc3QvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9zcnJhZi9kaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7Ozs7O0FBRUEsU0FBUyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsYUFBSztBQUNqRCxNQUFNLE9BQU8sU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQWI7O0FBRUEsTUFBTSxLQUFLLHFCQUFNO0FBQ2YsV0FBTztBQURRLEdBQU4sRUFFUixLQUZRLENBQVg7QUFHQSxNQUFNLE1BQU0scUJBQU07QUFDaEIsV0FBTztBQURTLEdBQU4sRUFFVCxLQUZTLENBQVo7O0FBSUE7QUFDQSxTQUFPLEdBQVAsR0FBYSxHQUFiOztBQUVBO0FBQ0E7O0FBRUEsS0FBRyxFQUFILENBQU0sSUFBTixFQUFZO0FBQUEsV0FBTSxRQUFRLEdBQVIsQ0FBWSxPQUFaLENBQU47QUFBQSxHQUFaO0FBQ0EsS0FBRyxFQUFILENBQU0sTUFBTixFQUFjO0FBQUEsV0FBTSxRQUFRLEdBQVIsQ0FBWSxTQUFaLENBQU47QUFBQSxHQUFkOztBQUVBLE1BQUksRUFBSixDQUFPLElBQVAsRUFBYTtBQUFBLFdBQU0sUUFBUSxHQUFSLENBQVksUUFBWixDQUFOO0FBQUEsR0FBYjtBQUNBLE1BQUksRUFBSixDQUFPLE1BQVAsRUFBZTtBQUFBLFdBQUssUUFBUSxHQUFSLENBQVksVUFBWixDQUFMO0FBQUEsR0FBZjtBQUNELENBckJEOzs7cWxCQ0NlLFVBQXVCLElBQXRCLEVBQXNCLDJEQUFULENBQVMsY0FDaEMsRUFBVyxJQURxQixDQUVoQyxFQUFPLENBRnlCLENBR2hDLEVBQVcsQ0FIcUIsQ0FLOUIsRUFBVSxvQkFMb0IsQ0EyQnBDLG1C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LE1BQU0sQ0FBdkIsQ0FBeUIsTUFBTSxDQUEvQixDQUExRyxDQUE0SSxFQUFFLEtBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsU0FBUyxDQUFULENBQWMsQ0FBZCxDQUFnQixDQUFDLEdBQUksR0FBRSxFQUFLLElBQVgsQ0FBZ0IsRUFBRSxFQUFLLElBQXZCLENBQTRCLEVBQUUsS0FBRixDQUFRLENBQVIsQ0FBVSxFQUFFLEtBQUYsQ0FBUSxDQUFsQixDQUFvQixFQUFFLENBQUYsQ0FBSSxDQUFKLENBQU8sQ0FBeEYsQ0FBOUksQ0FBd08sRUFBRSxLQUFLLE1BQUwsQ0FBWSxHQUFaLENBQWdCLFNBQVMsQ0FBVCxDQUFlLENBQWYsQ0FBaUIsQ0FBQyxHQUFJLEdBQUUsRUFBTSxJQUFaLENBQWlCLEVBQUUsRUFBTSxJQUF6QixDQUE4QixFQUFFLEtBQUYsQ0FBUSxDQUFSLENBQVUsRUFBRSxLQUFGLENBQVEsQ0FBbEIsQ0FBb0IsRUFBRSxDQUFGLENBQUksQ0FBSixDQUFPLENBQTNGLENBQTFPLENBQXVVLE1BQU0sQ0FBQyxRQUFRLFVBQWtCLENBQUMsTUFBTyxHQUFFLE9BQUYsR0FBWSxFQUFFLE9BQUYsRUFBWixDQUF3QixJQUFLLENBQWhFLENBQWlFLE9BQU8sVUFBaUIsQ0FBQyxNQUFPLEdBQUUsTUFBRixHQUFXLEVBQUUsTUFBRixFQUFYLENBQXNCLElBQUssQ0FBNUgsQ0FBOEgsQ0FBeHBCLEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHVwZHduIGZyb20gJy4uL3BhY2thZ2UvaW5kZXguanMnXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBlID0+IHtcbiAgY29uc3QgdmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3JylcblxuICBjb25zdCB1ZCA9IHVwZHduKHtcbiAgICBzcGVlZDogMTAwXG4gIH0sICdvbmUnKVxuICBjb25zdCB1ZDIgPSB1cGR3bih7XG4gICAgc3BlZWQ6IDQwMFxuICB9LCAndHdvJylcblxuICAvLyB3aW5kb3cudWQgPSB1ZFxuICB3aW5kb3cudWQyID0gdWQyXG5cbiAgLy8gdWQub24oJ3VwJywgKCkgPT4gdmlldy5pbm5lckhUTUwgPSAndXAnKVxuICAvLyB1ZC5vbignZG93bicsICgpID0+IHZpZXcuaW5uZXJIVE1MID0gJ2Rvd24nKVxuXG4gIHVkLm9uKCd1cCcsICgpID0+IGNvbnNvbGUubG9nKCd1ZCB1cCcpKVxuICB1ZC5vbignZG93bicsICgpID0+IGNvbnNvbGUubG9nKCd1ZCBkb3duJykpXG5cbiAgdWQyLm9uKCd1cCcsICgpID0+IGNvbnNvbGUubG9nKCd1ZDIgdXAnKSlcbiAgdWQyLm9uKCdkb3duJywgKCkgPT5jb25zb2xlLmxvZygndWQyIGRvd24nKSkgXG59KVxuIiwiaW1wb3J0IHNycmFmIGZyb20gJ3NycmFmJ1xuaW1wb3J0IGxvb3AgZnJvbSAnbG9vcC5qcydcblxuZXhwb3J0IGRlZmF1bHQgKGNvbmZpZyA9IHt9LCBuYW1lKSA9PiB7XG4gIGxldCBwb3NpdGlvbiA9IG51bGxcbiAgbGV0IHRpbWUgPSAwXG4gIGxldCBwcmV2dGltZSA9IDBcblxuICBjb25zdCBlbWl0dGVyID0gbG9vcCgpXG5cbiAgY29uc3Qgc2Nyb2xsZXIgPSAoeyBzcGVlZCA9IDUwLCAuLi5vcHRzIH0pID0+IHNycmFmID8gc3JyYWYuc2Nyb2xsLnVzZSgoeyBjdXJyLCBwcmV2IH0sIGV2ZW50ID0geyB0aW1lU3RhbXA6IDAgfSkgPT4ge1xuICAgIHRpbWUgPSBldmVudC50aW1lU3RhbXAgLSBwcmV2dGltZVxuICAgIHByZXZ0aW1lID0gZXZlbnQudGltZVN0YW1wXG5cbiAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguYWJzKGN1cnIgLSBwcmV2KVxuICAgIGNvbnN0IHZlbG9jaXR5ID0gKChkaXN0YW5jZSAvIHRpbWUpIHx8IDApICogKGNvbmZpZy5pbnRlcnZhbCB8fCAxMDApXG4gICAgY29uc3QgdGhyZXNob2xkID0gdmVsb2NpdHkgPiBzcGVlZFxuXG4gICAgY29uc3QgaGFuZGxlciA9IHBvcyA9PiB7XG4gICAgICBwb3NpdGlvbiA9IHBvc1xuICAgICAgZW1pdHRlci5lbWl0KHBvcylcbiAgICB9XG5cbiAgICBpZiAoY3VyciA+PSBwcmV2ICYmIHBvc2l0aW9uICE9PSAnZG93bicgJiYgdGhyZXNob2xkKSB7XG4gICAgICBoYW5kbGVyKCdkb3duJylcbiAgICB9IGVsc2UgaWYgKGN1cnIgPD0gcHJldiAmJiBwb3NpdGlvbiAhPT0gJ3VwJyAmJiB0aHJlc2hvbGQpIHtcbiAgICAgIGhhbmRsZXIoJ3VwJylcbiAgICB9XG4gIH0pLnVwZGF0ZSgpIDoge31cblxuICByZXR1cm4ge1xuICAgIC4uLnNjcm9sbGVyKGNvbmZpZyksXG4gICAgLi4uZW1pdHRlcixcbiAgICBnZXQgcG9zaXRpb24oKSB7XG4gICAgICByZXR1cm4gcG9zaXRpb25cbiAgICB9LFxuICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgdmFyIGxpc3RlbmVycyA9IHt9O1xuXG4gIHZhciBvbiA9IGZ1bmN0aW9uIG9uKGUpIHtcbiAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG5cbiAgICBpZiAoIWNiKSByZXR1cm47XG4gICAgbGlzdGVuZXJzW2VdID0gbGlzdGVuZXJzW2VdIHx8IHsgcXVldWU6IFtdIH07XG4gICAgbGlzdGVuZXJzW2VdLnF1ZXVlLnB1c2goY2IpO1xuICB9O1xuXG4gIHZhciBlbWl0ID0gZnVuY3Rpb24gZW1pdChlKSB7XG4gICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG5cbiAgICB2YXIgaXRlbXMgPSBsaXN0ZW5lcnNbZV0gPyBsaXN0ZW5lcnNbZV0ucXVldWUgOiBmYWxzZTtcbiAgICBpdGVtcyAmJiBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gaShkYXRhKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gX2V4dGVuZHMoe30sIG8sIHtcbiAgICBlbWl0OiBlbWl0LFxuICAgIG9uOiBvblxuICB9KTtcbn07IiwiJ3VzZSBzdHJpY3QnO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyl7Zm9yKHZhciBmLGQ9MDtkPGMubGVuZ3RoO2QrKylmPWNbZF0sZi5lbnVtZXJhYmxlPWYuZW51bWVyYWJsZXx8ITEsZi5jb25maWd1cmFibGU9ITAsJ3ZhbHVlJ2luIGYmJihmLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYixmLmtleSxmKX1yZXR1cm4gZnVuY3Rpb24oYixjLGQpe3JldHVybiBjJiZhKGIucHJvdG90eXBlLGMpLGQmJmEoYixkKSxifX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnX19lc01vZHVsZScse3ZhbHVlOiEwfSk7ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyl9dmFyIHNjcm9sbEluc3RhbmNlPW51bGwscmVzaXplSW5zdGFuY2U9bnVsbCxMaXN0ZW5lcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7X2NsYXNzQ2FsbENoZWNrKHRoaXMsYSksdGhpcy50eXBlPWIsdGhpcy5wb29sPTAsdGhpcy5xdWV1ZT1bXSx0aGlzLmN1cnI9dGhpcy5wb3NpdGlvbigpLHRoaXMucHJldj10aGlzLnBvc2l0aW9uKCksdGhpcy50aWNraW5nPSExLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5yZXF1ZXN0RnJhbWUuYmluZCh0aGlzKSl9cmV0dXJuIF9jcmVhdGVDbGFzcyhhLFt7a2V5Oidwb3NpdGlvbicsdmFsdWU6ZnVuY3Rpb24gcG9zaXRpb24oKXtyZXR1cm4nc2Nyb2xsJz09PXRoaXMudHlwZT93aW5kb3cuc2Nyb2xsWXx8d2luZG93LnBhZ2VZT2Zmc2V0OndpbmRvdy5pbm5lcldpZHRofX0se2tleToncmVxdWVzdEZyYW1lJyx2YWx1ZTpmdW5jdGlvbiByZXF1ZXN0RnJhbWUoYil7dGhpcy5lPWIsdGhpcy5jdXJyPXRoaXMucG9zaXRpb24oKSx0aGlzLnRpY2tpbmd8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucnVuLmJpbmQodGhpcykpLHRoaXMudGlja2luZz0hMCl9fSx7a2V5OidydW4nLHZhbHVlOmZ1bmN0aW9uIHJ1bigpe3ZhciBiPXRoaXM7dGhpcy5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3JldHVybiBjWzFdKHtjdXJyOmIuY3VycixwcmV2OmIucHJldn0sYi5lKX0pLHRoaXMucHJldj10aGlzLmN1cnIsdGhpcy50aWNraW5nPSExfX0se2tleTondXNlJyx2YWx1ZTpmdW5jdGlvbiB1c2UoYil7dmFyIGM9dGhpcyxkPWMucG9vbCsrO3JldHVybiBjLnF1ZXVlLnB1c2goW2QsYl0pLHtkZXN0cm95OmZ1bmN0aW9uIGRlc3Ryb3koKXtyZXR1cm4gYy5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsZyl7ZlswXT09PWQmJmMucXVldWUuc3BsaWNlKGcsMSl9KSx0aGlzfSx1cGRhdGU6ZnVuY3Rpb24gdXBkYXRlKCl7cmV0dXJuIGIoe2N1cnI6Yy5jdXJyLHByZXY6Yy5wcmV2fSxjLmUpLHRoaXN9fX19LHtrZXk6J3VwZGF0ZScsdmFsdWU6ZnVuY3Rpb24gdXBkYXRlKCl7dGhpcy5ydW4oKX19XSksYX0oKTtleHBvcnRzLmRlZmF1bHQ9J3VuZGVmaW5lZCc9PXR5cGVvZiB3aW5kb3c/bnVsbDp7Z2V0IHNjcm9sbCgpe3JldHVybiBzY3JvbGxJbnN0YW5jZXx8KHNjcm9sbEluc3RhbmNlPW5ldyBMaXN0ZW5lcignc2Nyb2xsJykpLHNjcm9sbEluc3RhbmNlfSxnZXQgcmVzaXplKCl7cmV0dXJuIHJlc2l6ZUluc3RhbmNlfHwocmVzaXplSW5zdGFuY2U9bmV3IExpc3RlbmVyKCdyZXNpemUnKSkscmVzaXplSW5zdGFuY2V9LHVzZTpmdW5jdGlvbiB1c2UoYSl7dmFyIF9zY3JvbGw9dGhpcy5zY3JvbGwsYj1fc2Nyb2xsLmN1cnIsYz1fc2Nyb2xsLnByZXYsX3Jlc2l6ZT10aGlzLnJlc2l6ZSxkPV9yZXNpemUuY3VycixmPV9yZXNpemUucHJldixnPXtjdXJyWTpiLHByZXZZOmMsY3Vyclg6ZCxwcmV2WDpmfSxoPXRoaXMuc2Nyb2xsLnVzZShmdW5jdGlvbihfcmVmLG0pe3ZhciBrPV9yZWYuY3VycixsPV9yZWYucHJldjtnLmN1cnJZPWssZy5wcmV2WT1sLGEoZyxtKX0pLGo9dGhpcy5yZXNpemUudXNlKGZ1bmN0aW9uKF9yZWYyLG0pe3ZhciBrPV9yZWYyLmN1cnIsbD1fcmVmMi5wcmV2O2cuY3Vyclg9ayxnLnByZXZYPWwsYShnLG0pfSk7cmV0dXJue2Rlc3Ryb3k6ZnVuY3Rpb24gZGVzdHJveSgpe3JldHVybiBoLmRlc3Ryb3koKSxqLmRlc3Ryb3koKSx0aGlzfSx1cGRhdGU6ZnVuY3Rpb24gdXBkYXRlKCl7cmV0dXJuIGgudXBkYXRlKCksai51cGRhdGUoKSx0aGlzfX19fTsiXX0=
