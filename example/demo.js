(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _index = require('../package/index.js');

var _index2 = _interopRequireDefault(_index);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

document.addEventListener('DOMContentLoaded', function (e) {
  var view = document.getElementById('view');

  var ud = (0, _index2.default)({
    speed: 100
  }, 'one');
  var ud2 = (0, _index2.default)({
    speed: 400
  }, 'two');

  // window.ud = ud
  window.ud2 = ud2;

  // ud.on('up', () => view.innerHTML = 'up')
  // ud.on('down', () => view.innerHTML = 'down')

  ud.on('up', function () {
    return console.log('ud up');
  });
  ud.on('down', function () {
    return console.log('ud down');
  });

  ud2.on('up', function () {
    return console.log('ud2 up');
  });
  ud2.on('down', function () {
    return console.log('ud2 down');
  });
});

},{"../package/index.js":2}],2:[function(require,module,exports){
'use strict';var _extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var d in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a},_srraf=require('srraf'),_srraf2=_interopRequireDefault(_srraf),_loop=require('loop.js'),_loop2=_interopRequireDefault(_loop);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _objectWithoutProperties(a,b){var d={};for(var c in a)0<=b.indexOf(c)||Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d}exports.default=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=arguments[1],c='static',d=0,e=0,f=(0,_loop2.default)();return _extends({},function g(h){var j=h.speed,k=j===void 0?50:j,l=_objectWithoutProperties(h,['speed']);return _srraf2.default?_srraf2.default.scroll.use(function(m){var n=m.curr,o=m.prev,p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{timeStamp:0};d=p.timeStamp-e,e=p.timeStamp;var q=0>n-o?-1*(n-o):n-o,r=(q/d||0)*(a.interval||100),s=r>k,t=function(u){c=u,f.emit(u)};n>=o&&'down'!==c&&s?t('down'):n<=o&&'up'!==c&&s?t('up'):!s&&t('static')}).update():{}}(a),f,{get position(){return c}})};

},{"loop.js":3,"srraf":4}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.default = function () {
  var o = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var listeners = {};

  var on = function on(e) {
    var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    if (!cb) return;
    listeners[e] = listeners[e] || { queue: [] };
    listeners[e].queue.push(cb);
  };

  var emit = function emit(e) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    var items = listeners[e] ? listeners[e].queue : false;
    items && items.forEach(function (i) {
      return i(data);
    });
  };

  return _extends({}, o, {
    emit: emit,
    on: on
  });
};
},{}],4:[function(require,module,exports){
'use strict';var _createClass=function(){function e(i,n){for(var o,p=0;p<n.length;p++)o=n[p],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}return function(i,n,o){return n&&e(i.prototype,n),o&&e(i,o),i}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError('Cannot call a class as a function')}var scrollInstance=null,resizeInstance=null,Listener=function(){function e(i){_classCallCheck(this,e),this.type=i,this.pool=0,this.queue=[],this.curr=this.position(),this.prev=this.position(),this.ticking=!1,window.addEventListener(i,this.requestFrame.bind(this))}return _createClass(e,[{key:'position',value:function(){return'scroll'===this.type?window.scrollY||window.pageYOffset:window.innerWidth}},{key:'requestFrame',value:function(n){this.e=n,this.curr=this.position(),this.ticking||(window.requestAnimationFrame(this.run.bind(this)),this.ticking=!0)}},{key:'run',value:function(){var n=this;this.queue.forEach(function(o){return o[1]({curr:n.curr,prev:n.prev},n.e)}),this.prev=this.curr,this.ticking=!1}},{key:'use',value:function(n){var o=this,p=o.pool++;return o.queue.push([p,n]),{destroy:function(){return o.queue.forEach(function(r,s){r[0]===p&&o.queue.splice(s,1)}),this},update:function(){return n({curr:o.curr,prev:o.prev},o.e),this}}}},{key:'update',value:function(){this.run()}}]),e}();exports.default='undefined'==typeof window?null:{get scroll(){return scrollInstance||(scrollInstance=new Listener('scroll')),scrollInstance},get resize(){return resizeInstance||(resizeInstance=new Listener('resize')),resizeInstance},use:function(i){var n=this.scroll,o=n.curr,p=n.prev,q=this.resize,r=q.curr,s=q.prev,t={currY:o,prevY:p,currX:r,prevX:s},u=this.scroll.use(function(w,x){var y=w.curr,z=w.prev;t.currY=y,t.prevY=z,i(t,x)}),v=this.resize.use(function(w,x){var y=w.curr,z=w.prev;t.currX=y,t.prevX=z,i(t,x)});return{destroy:function(){return u.destroy(),v.destroy(),this},update:function(){return u.update(),v.update(),this}}}};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIi4uL3BhY2thZ2UvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9sb29wLmpzL2Rpc3QvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9zcnJhZi9kaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7Ozs7O0FBRUEsU0FBUyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsYUFBSztBQUNqRCxNQUFNLE9BQU8sU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQWI7O0FBRUEsTUFBTSxLQUFLLHFCQUFNO0FBQ2YsV0FBTztBQURRLEdBQU4sRUFFUixLQUZRLENBQVg7QUFHQSxNQUFNLE1BQU0scUJBQU07QUFDaEIsV0FBTztBQURTLEdBQU4sRUFFVCxLQUZTLENBQVo7O0FBSUE7QUFDQSxTQUFPLEdBQVAsR0FBYSxHQUFiOztBQUVBO0FBQ0E7O0FBRUEsS0FBRyxFQUFILENBQU0sSUFBTixFQUFZO0FBQUEsV0FBTSxRQUFRLEdBQVIsQ0FBWSxPQUFaLENBQU47QUFBQSxHQUFaO0FBQ0EsS0FBRyxFQUFILENBQU0sTUFBTixFQUFjO0FBQUEsV0FBTSxRQUFRLEdBQVIsQ0FBWSxTQUFaLENBQU47QUFBQSxHQUFkOztBQUVBLE1BQUksRUFBSixDQUFPLElBQVAsRUFBYTtBQUFBLFdBQU0sUUFBUSxHQUFSLENBQVksUUFBWixDQUFOO0FBQUEsR0FBYjtBQUNBLE1BQUksRUFBSixDQUFPLE1BQVAsRUFBZTtBQUFBLFdBQUssUUFBUSxHQUFSLENBQVksVUFBWixDQUFMO0FBQUEsR0FBZjtBQUNELENBckJEOzs7cWxCQ0NlLFVBQXVCLElBQXRCLEVBQXNCLDJEQUFULENBQVMsY0FDaEMsRUFBVyxRQURxQixDQUVoQyxFQUFPLENBRnlCLENBR2hDLEVBQVcsQ0FIcUIsQ0FLOUIsRUFBVSxvQkFMb0IsQ0E2QnBDLG1C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QUUsRUFBUSxJQUFwRixDQUF5RixFQUFFLEVBQVEsSUFBbkcsQ0FBd0csRUFBRSxDQUFDLE1BQU0sQ0FBUCxDQUFTLE1BQU0sQ0FBZixDQUFpQixNQUFNLENBQXZCLENBQXlCLE1BQU0sQ0FBL0IsQ0FBMUcsQ0FBNEksRUFBRSxLQUFLLE1BQUwsQ0FBWSxHQUFaLENBQWdCLFNBQVMsQ0FBVCxDQUFjLENBQWQsQ0FBZ0IsQ0FBQyxHQUFJLEdBQUUsRUFBSyxJQUFYLENBQWdCLEVBQUUsRUFBSyxJQUF2QixDQUE0QixFQUFFLEtBQUYsQ0FBUSxDQUFSLENBQVUsRUFBRSxLQUFGLENBQVEsQ0FBbEIsQ0FBb0IsRUFBRSxDQUFGLENBQUksQ0FBSixDQUFPLENBQXhGLENBQTlJLENBQXdPLEVBQUUsS0FBSyxNQUFMLENBQVksR0FBWixDQUFnQixTQUFTLENBQVQsQ0FBZSxDQUFmLENBQWlCLENBQUMsR0FBSSxHQUFFLEVBQU0sSUFBWixDQUFpQixFQUFFLEVBQU0sSUFBekIsQ0FBOEIsRUFBRSxLQUFGLENBQVEsQ0FBUixDQUFVLEVBQUUsS0FBRixDQUFRLENBQWxCLENBQW9CLEVBQUUsQ0FBRixDQUFJLENBQUosQ0FBTyxDQUEzRixDQUExTyxDQUF1VSxNQUFNLENBQUMsUUFBUSxVQUFrQixDQUFDLE1BQU8sR0FBRSxPQUFGLEdBQVksRUFBRSxPQUFGLEVBQVosQ0FBd0IsSUFBSyxDQUFoRSxDQUFpRSxPQUFPLFVBQWlCLENBQUMsTUFBTyxHQUFFLE1BQUYsR0FBVyxFQUFFLE1BQUYsRUFBWCxDQUFzQixJQUFLLENBQTVILENBQThILENBQXhwQixDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB1cGR3biBmcm9tICcuLi9wYWNrYWdlL2luZGV4LmpzJ1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZSA9PiB7XG4gIGNvbnN0IHZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldycpXG5cbiAgY29uc3QgdWQgPSB1cGR3bih7XG4gICAgc3BlZWQ6IDEwMFxuICB9LCAnb25lJylcbiAgY29uc3QgdWQyID0gdXBkd24oe1xuICAgIHNwZWVkOiA0MDBcbiAgfSwgJ3R3bycpXG5cbiAgLy8gd2luZG93LnVkID0gdWRcbiAgd2luZG93LnVkMiA9IHVkMlxuXG4gIC8vIHVkLm9uKCd1cCcsICgpID0+IHZpZXcuaW5uZXJIVE1MID0gJ3VwJylcbiAgLy8gdWQub24oJ2Rvd24nLCAoKSA9PiB2aWV3LmlubmVySFRNTCA9ICdkb3duJylcblxuICB1ZC5vbigndXAnLCAoKSA9PiBjb25zb2xlLmxvZygndWQgdXAnKSlcbiAgdWQub24oJ2Rvd24nLCAoKSA9PiBjb25zb2xlLmxvZygndWQgZG93bicpKVxuXG4gIHVkMi5vbigndXAnLCAoKSA9PiBjb25zb2xlLmxvZygndWQyIHVwJykpXG4gIHVkMi5vbignZG93bicsICgpID0+Y29uc29sZS5sb2coJ3VkMiBkb3duJykpIFxufSlcbiIsImltcG9ydCBzcnJhZiBmcm9tICdzcnJhZidcbmltcG9ydCBsb29wIGZyb20gJ2xvb3AuanMnXG5cbmV4cG9ydCBkZWZhdWx0IChjb25maWcgPSB7fSwgbmFtZSkgPT4ge1xuICBsZXQgcG9zaXRpb24gPSAnc3RhdGljJ1xuICBsZXQgdGltZSA9IDBcbiAgbGV0IHByZXZ0aW1lID0gMFxuXG4gIGNvbnN0IGVtaXR0ZXIgPSBsb29wKClcblxuICBjb25zdCBzY3JvbGxlciA9ICh7IHNwZWVkID0gNTAsIC4uLm9wdHMgfSkgPT4gc3JyYWYgPyBzcnJhZi5zY3JvbGwudXNlKCh7IGN1cnIsIHByZXYgfSwgZXZlbnQgPSB7IHRpbWVTdGFtcDogMCB9KSA9PiB7XG4gICAgdGltZSA9IGV2ZW50LnRpbWVTdGFtcCAtIHByZXZ0aW1lXG4gICAgcHJldnRpbWUgPSBldmVudC50aW1lU3RhbXBcblxuICAgIGNvbnN0IGRpc3RhbmNlID0gY3VyciAtIHByZXYgPCAwID8gKGN1cnIgLSBwcmV2KSAqIC0xIDogY3VyciAtIHByZXZcbiAgICBjb25zdCB2ZWxvY2l0eSA9ICgoZGlzdGFuY2UgLyB0aW1lKSB8fCAwKSAqIChjb25maWcuaW50ZXJ2YWwgfHwgMTAwKVxuICAgIGNvbnN0IHRocmVzaG9sZCA9IHZlbG9jaXR5ID4gc3BlZWRcblxuICAgIGNvbnN0IGhhbmRsZXIgPSBwb3MgPT4ge1xuICAgICAgcG9zaXRpb24gPSBwb3NcbiAgICAgIGVtaXR0ZXIuZW1pdChwb3MpXG4gICAgfVxuXG4gICAgaWYgKGN1cnIgPj0gcHJldiAmJiBwb3NpdGlvbiAhPT0gJ2Rvd24nICYmIHRocmVzaG9sZCkge1xuICAgICAgaGFuZGxlcignZG93bicpXG4gICAgfSBlbHNlIGlmIChjdXJyIDw9IHByZXYgJiYgcG9zaXRpb24gIT09ICd1cCcgJiYgdGhyZXNob2xkKSB7XG4gICAgICBoYW5kbGVyKCd1cCcpXG4gICAgfSBlbHNlIGlmICghdGhyZXNob2xkKSB7XG4gICAgICBoYW5kbGVyKCdzdGF0aWMnKVxuICAgIH1cbiAgfSkudXBkYXRlKCkgOiB7fVxuXG4gIHJldHVybiB7XG4gICAgLi4uc2Nyb2xsZXIoY29uZmlnKSxcbiAgICAuLi5lbWl0dGVyLFxuICAgIGdldCBwb3NpdGlvbigpIHtcbiAgICAgIHJldHVybiBwb3NpdGlvblxuICAgIH0sXG4gIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBvID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICB2YXIgbGlzdGVuZXJzID0ge307XG5cbiAgdmFyIG9uID0gZnVuY3Rpb24gb24oZSkge1xuICAgIHZhciBjYiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcblxuICAgIGlmICghY2IpIHJldHVybjtcbiAgICBsaXN0ZW5lcnNbZV0gPSBsaXN0ZW5lcnNbZV0gfHwgeyBxdWV1ZTogW10gfTtcbiAgICBsaXN0ZW5lcnNbZV0ucXVldWUucHVzaChjYik7XG4gIH07XG5cbiAgdmFyIGVtaXQgPSBmdW5jdGlvbiBlbWl0KGUpIHtcbiAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcblxuICAgIHZhciBpdGVtcyA9IGxpc3RlbmVyc1tlXSA/IGxpc3RlbmVyc1tlXS5xdWV1ZSA6IGZhbHNlO1xuICAgIGl0ZW1zICYmIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBpKGRhdGEpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgbywge1xuICAgIGVtaXQ6IGVtaXQsXG4gICAgb246IG9uXG4gIH0pO1xufTsiLCIndXNlIHN0cmljdCc7dmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXtmb3IodmFyIGYsZD0wO2Q8Yy5sZW5ndGg7ZCsrKWY9Y1tkXSxmLmVudW1lcmFibGU9Zi5lbnVtZXJhYmxlfHwhMSxmLmNvbmZpZ3VyYWJsZT0hMCwndmFsdWUnaW4gZiYmKGYud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGYua2V5LGYpfXJldHVybiBmdW5jdGlvbihiLGMsZCl7cmV0dXJuIGMmJmEoYi5wcm90b3R5cGUsYyksZCYmYShiLGQpLGJ9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCdfX2VzTW9kdWxlJyx7dmFsdWU6ITB9KTtmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKX12YXIgc2Nyb2xsSW5zdGFuY2U9bnVsbCxyZXNpemVJbnN0YW5jZT1udWxsLExpc3RlbmVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxhKSx0aGlzLnR5cGU9Yix0aGlzLnBvb2w9MCx0aGlzLnF1ZXVlPVtdLHRoaXMuY3Vycj10aGlzLnBvc2l0aW9uKCksdGhpcy5wcmV2PXRoaXMucG9zaXRpb24oKSx0aGlzLnRpY2tpbmc9ITEsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLnJlcXVlc3RGcmFtZS5iaW5kKHRoaXMpKX1yZXR1cm4gX2NyZWF0ZUNsYXNzKGEsW3trZXk6J3Bvc2l0aW9uJyx2YWx1ZTpmdW5jdGlvbiBwb3NpdGlvbigpe3JldHVybidzY3JvbGwnPT09dGhpcy50eXBlP3dpbmRvdy5zY3JvbGxZfHx3aW5kb3cucGFnZVlPZmZzZXQ6d2luZG93LmlubmVyV2lkdGh9fSx7a2V5OidyZXF1ZXN0RnJhbWUnLHZhbHVlOmZ1bmN0aW9uIHJlcXVlc3RGcmFtZShiKXt0aGlzLmU9Yix0aGlzLmN1cnI9dGhpcy5wb3NpdGlvbigpLHRoaXMudGlja2luZ3x8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5ydW4uYmluZCh0aGlzKSksdGhpcy50aWNraW5nPSEwKX19LHtrZXk6J3J1bicsdmFsdWU6ZnVuY3Rpb24gcnVuKCl7dmFyIGI9dGhpczt0aGlzLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24oYyl7cmV0dXJuIGNbMV0oe2N1cnI6Yi5jdXJyLHByZXY6Yi5wcmV2fSxiLmUpfSksdGhpcy5wcmV2PXRoaXMuY3Vycix0aGlzLnRpY2tpbmc9ITF9fSx7a2V5Oid1c2UnLHZhbHVlOmZ1bmN0aW9uIHVzZShiKXt2YXIgYz10aGlzLGQ9Yy5wb29sKys7cmV0dXJuIGMucXVldWUucHVzaChbZCxiXSkse2Rlc3Ryb3k6ZnVuY3Rpb24gZGVzdHJveSgpe3JldHVybiBjLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24oZixnKXtmWzBdPT09ZCYmYy5xdWV1ZS5zcGxpY2UoZywxKX0pLHRoaXN9LHVwZGF0ZTpmdW5jdGlvbiB1cGRhdGUoKXtyZXR1cm4gYih7Y3VycjpjLmN1cnIscHJldjpjLnByZXZ9LGMuZSksdGhpc319fX0se2tleTondXBkYXRlJyx2YWx1ZTpmdW5jdGlvbiB1cGRhdGUoKXt0aGlzLnJ1bigpfX1dKSxhfSgpO2V4cG9ydHMuZGVmYXVsdD0ndW5kZWZpbmVkJz09dHlwZW9mIHdpbmRvdz9udWxsOntnZXQgc2Nyb2xsKCl7cmV0dXJuIHNjcm9sbEluc3RhbmNlfHwoc2Nyb2xsSW5zdGFuY2U9bmV3IExpc3RlbmVyKCdzY3JvbGwnKSksc2Nyb2xsSW5zdGFuY2V9LGdldCByZXNpemUoKXtyZXR1cm4gcmVzaXplSW5zdGFuY2V8fChyZXNpemVJbnN0YW5jZT1uZXcgTGlzdGVuZXIoJ3Jlc2l6ZScpKSxyZXNpemVJbnN0YW5jZX0sdXNlOmZ1bmN0aW9uIHVzZShhKXt2YXIgX3Njcm9sbD10aGlzLnNjcm9sbCxiPV9zY3JvbGwuY3VycixjPV9zY3JvbGwucHJldixfcmVzaXplPXRoaXMucmVzaXplLGQ9X3Jlc2l6ZS5jdXJyLGY9X3Jlc2l6ZS5wcmV2LGc9e2N1cnJZOmIscHJldlk6YyxjdXJyWDpkLHByZXZYOmZ9LGg9dGhpcy5zY3JvbGwudXNlKGZ1bmN0aW9uKF9yZWYsbSl7dmFyIGs9X3JlZi5jdXJyLGw9X3JlZi5wcmV2O2cuY3Vyclk9ayxnLnByZXZZPWwsYShnLG0pfSksaj10aGlzLnJlc2l6ZS51c2UoZnVuY3Rpb24oX3JlZjIsbSl7dmFyIGs9X3JlZjIuY3VycixsPV9yZWYyLnByZXY7Zy5jdXJyWD1rLGcucHJldlg9bCxhKGcsbSl9KTtyZXR1cm57ZGVzdHJveTpmdW5jdGlvbiBkZXN0cm95KCl7cmV0dXJuIGguZGVzdHJveSgpLGouZGVzdHJveSgpLHRoaXN9LHVwZGF0ZTpmdW5jdGlvbiB1cGRhdGUoKXtyZXR1cm4gaC51cGRhdGUoKSxqLnVwZGF0ZSgpLHRoaXN9fX19OyJdfQ==
